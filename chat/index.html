<!doctype html><html lang="de"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Droniq Chat</title><link rel="stylesheet" href="/assets/overlay.css"/><style>body{margin:0;font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}#wrap{display:flex;flex-direction:column;height:100vh}#msgs{flex:1;overflow:auto;padding:12px;background:#fff}.m{margin:8px 0}.me{text-align:right}.bubble{background:#f7f7f8;border-radius:10px;padding:8px;display:inline-block;max-width:85%}.me .bubble{background:#e8f0ff}#bar{display:flex;gap:8px;padding:8px;border-top:1px solid #eee;background:#fff}input{flex:1;padding:10px;border:1px solid #ddd;border-radius:8px}button{padding:10px 14px;border:0;border-radius:8px;background:#111;color:#fff;cursor:pointer}small a{color:#0a66c2}</style></head><body><div id="wrap"><div id="msgs"></div><div id="bar"><input id="q" placeholder="Frag uns etwas …"/><button id="go">Senden</button></div></div><script>const m=document.getElementById('msgs');const q=document.getElementById('q');document.getElementById('go').onclick=s;function a(r,h){const d=document.createElement('div');d.className='m '+(r==='me'?'me':'');d.innerHTML='<div class="bubble">'+h+'</div>';m.appendChild(d);m.scrollTop=m.scrollHeight;}async function s(){const t=q.value.trim();if(!t)return;a('me',t);q.value='';a('bot','…');try{const r=await fetch('/api/chat',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({message:t})});const j=await r.json();m.lastChild.remove();let x=(j.answer||'').replace(/\n/g,'<br/>');if(j.citations&&j.citations.length){x+='<br/><small>Quellen: '+j.citations.map(u=>'<a target="_blank" href="'+u+'">'+u+'</a>').join(' , ')+'</small>';}a('bot',x||'Entschuldigung, keine Antwort.');}catch(e){m.lastChild.remove();a('bot','Entschuldigung, der Chat ist nicht verfügbar.');}}q.addEventListener('keydown',e=>{if(e.key==='Enter')s();});</script></body></html>